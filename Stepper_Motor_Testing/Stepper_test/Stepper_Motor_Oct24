/*   Stepper Motor Driver A4988
 *   Does not yet Simultaneous Run 
 *      -To-Be-Added:  Interrupt
 *                     PWM instead of for loop
 *                     Pins for Mega over Uno
 * Woops I forgot to click save on saturday - Eric
 */



// defines pins numbers
const int stepPin = 3; 
const int dirPin = 4; 
 
void setup() {
  // Sets the two pins as Outputs
  pinMode(stepPin,OUTPUT); 
  pinMode(dirPin,OUTPUT);
  Serial.begin(9600);
  

}


//rotateStepper, input Number of Degrees and StepPeriod
//NumDegrees: Accepts Negative and Positive Values
//StepPeriod: Period of each Step, 1Step = 360/200 Degrees
//Speed = Distance / StepPeriod = (360/200)/StepPeriod 
void rotateStepper(long NumDegrees, int StepPeriod)  {

  if(NumDegrees < 0)  {
    digitalWrite(dirPin,LOW);
    NumDegrees *= -1;
  } else  {
    digitalWrite(dirPin,HIGH);
  }
  NumDegrees *= 200;    //Convert Degrees to Steps
  NumDegrees = NumDegrees / (360);  //Steps = Degrees * 200/360
  
//  int stepperRunTime = StepPeriod * NumDegrees;
//  .pwm(3, 512, StepPeriod);
//  Timer1.attachInterrupt(stopStepper(), stepperRunTime); 
  for(int x = 0; x < NumDegrees; x++) {  //Square Wave Simulator
    digitalWrite(stepPin,HIGH);   
    delayMicroseconds(StepPeriod/2); 
    digitalWrite(stepPin,LOW); 
    delayMicroseconds(StepPeriod/2); 
  }
}

//end the stepper
void stopStepper()  {
 
  
}

//Testing Loop
void loop() {
  //setDirCW(); // Enables the motor to move in a particular direction
  rotateStepper(360, 2000);
//  Serial.println("Starting Clockwise");
//  delay(1000);
//  Serial.println("Going Clockwise");
//  delay(1000);
//  Serial.println("Stoppping Clockwise");
//  delay(1000);

  rotateStepper(-720, 1000);



  //rotateStepper(-720, 1000);
  //delay(1000);
}
